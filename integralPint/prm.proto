syntax = "proto3";
//package code generated by Rick  DO NOT EDIT.
package   trpc.vap_oteam.common;

//code generated by Rick  DO NOT EDIT.
option  java_package="com.tencent.trpcprotocol.vap_oteam.common.prm";
option  java_multiple_files = false;
option  java_outer_classname  = "prm";
//code generated by Rick  DO NOT EDIT.
option  go_package ="git.code.oa.com/trpcprotocol/vap_oteam/common_prm";


// https://iwiki.woa.com/pages/viewpage.action?pageId=420300751
message CreateProductReq {
    // tRPC数据校验模块 开启自动数据校验。限制传入参数只能为tsecstr默认安全类型
    bool instant_sync = 1;
    ProductInfo product_info = 2;
    OaUserInfo oa_user_info = 3;

    string app_id = 100; // 业务ID
}

message CreateProductRsp {
    string product_id = 1;
}

message ProductInfo{
//    string product_app_id = 1;
    string product_name = 2;
    string product_type = 3;
    int32 product_price = 4;
    string expend_mode = 5;
    string expend_callback_mode = 6;
    string product_description = 7;
    CustomProductInfo custom_product_info = 8;
}

message CustomProductInfo {
    string outer_product_id = 1;
}

message OaUserInfo{
    string user_id = 1;
    string user_name = 2;
}

// http://tdea.midas.boss.com/admin/midas/downloadAPIDocument?interfaceKey=createActivityResource&version=2020102901
message CreateActivityReq{
    repeated ActivityResourceRuleInfo activity_resource_rule_info_list = 1;
    repeated OverProviderProduct over_provide_product_list = 2;
    repeated BudgetConfigure budget_configure_list = 3;
    FusingRule quantity_fusing_rule = 4;
    FusingRule amount_fusing_rule = 5;
    int32 overload_rule_quantity_period_in_seconds = 6;
    int32 overload_rule_amount_period_in_seconds = 7;
    int32 overload_rule_quantity_limit = 8;
    int32 overload_rule_amount_limit = 9;
    string activity_resource_type = 10;
    string activity_resource_name = 11;
    string activity_resource_desc = 12;
    int32 user_total_get_limit = 13;
    int32 user_daily_get_limit = 14;
    repeated string warning_notify = 15;
    string user_define_ref = 16;
    string begin_time = 17;
    string end_time = 18;
    string user_name = 19;
    string order_id = 20;

    string app_id = 100; // 业务ID
}

message CreateActivityRsp{
    string activity_resource_id = 1;
}


message ActivityResourceRuleInfo{
    string package_product_id = 1;
    int32 overload_day_limit = 2;
    string rule_value = 3;
    int32 overload_alarm_threload_increase = 4;
    float overload_alarm_threload_present = 5;
    int32 single_user_day_limit_num = 6;
    int32 single_user_limit_num = 7;
    int32 total_limit_num = 8;
    string rule_value_name = 9;
    repeated PackageProductInfo package_product_info_list = 10;
}

message PackageProductInfo{
    string product_type_name = 1;
    float product_price = 2;
    string product_name= 3;
//    string product_app_id = 4;
    string product_type= 5;
    int32 product_num = 6;
    string product_id = 7;
}

message OverProviderProduct{
    string activity_resource_id = 1;
    repeated string check_warning_threshold = 2;
    string budget_product_id = 3;
    int32 total_budget = 4;
    string real_quota = 5;
}

message BudgetConfigure {
    repeated BudgetQuotaInfo budget_quota_info_list = 1;
    string budget_product_id = 2;
}

message BudgetQuotaInfo{
    float budget_quota = 1;
    string budget_id = 2;
}

message FusingRule {
    int32 next_threshold_percent = 1;
    int32 loop_threshold_percent = 2;
    bool fusing_rule_switch = 3;
    int32 period_in_minutes = 4;
    string loop_period_unit = 5;
    int32 loop_period = 6;
}

// http://tdea.midas.boss.com/admin/midas/downloadAPIDocument?interfaceKey=getActivityResourceInfo&version=2020121601
// 查询活动信息
message GetActivityReq{
    string activity_resource_id = 1;
    string user_name = 2;

    string app_id = 100; // 业务ID
}

message GetActivityRsp{
    repeated ActivityResourceRuleInfo activity_resource_rule_info_list = 1;
    repeated OverProviderProduct over_provide_product_list = 2;
    repeated BudgetConfigure budget_configure_list = 3;
    FusingRule quantity_fusing_rule = 4;
    FusingRule amount_fusing_rule = 5;
    int32 overload_rule_quantity_period_in_seconds = 6;
    int32 overload_rule_amount_period_in_seconds = 7;
    int32 overload_rule_quantity_limit = 8;
    int32 overload_rule_amount_limit = 9;
    string activity_resource_type = 10;
    string activity_resource_name = 11;
    string activity_resource_desc = 12;
    int32 user_total_get_limit = 13;
    int32 user_daily_get_limit = 14;
    repeated string warning_notify = 15;
    string user_define_ref = 16;
    string begin_time = 17;
    string end_time = 18;
    string user_name = 19;
    string order_id = 20;

    string supply_resource_status = 100;
    string success_recall_exception_budget = 101;
    int32 activity_resource_budget = 102;
    string user_define_ref_text = 103;
    string activity_resource_status = 104;
    string activity_resource_id = 105;
    string creator = 106;
}

// 获取预算列表
// http://tdea.midas.boss.com/admin/midas/downloadAPIDocument?interfaceKey=getBudgetInfoList&version=2020050601
message GetBudgetInfoListReq{
    string activity_resource_id = 1;
    string keyword = 2;
    string user_name = 3;
    string budget_type = 4;
    int64 page = 5;
    int64 size = 6;

    string app_id = 100; // 业务ID
}

message GetBudgetInfoListRsp{
    repeated BudgetInfo budget_info_list = 1;
    int32 total = 2;
}

message BudgetInfo {
    string external_budget_id = 1;  // 预算外部订单ID
    float budget_available = 2;     // 可用的预算余额
    float budget_amount = 3;        // 预算总金额
    bool is_use_whitelist = 4;      // 营销中台预算是否使用白名单
    string budget_status = 5;       // 预算状态
    string budget_type = 6;         // 预算类型
    string budget_desc = 7;         // 预算使用说明
    string budget_id = 8;           // 预算ID
    string creator = 9;             // 创建人
    repeated string whitelist = 10;
}

// 活动提交审批
message UnderReviewActivityResourceReq {
    string activity_resource_id = 1;    // 营销中台活动ID
    repeated string relate_approver_list = 2;   // 相关审批人
    string user_name = 3;             // 用户名
    string order_id = 4;              // 订单号

    string app_id = 100; // 业务ID
}
message UnderReviewActivityResourceRsp {
    // 错误信息通过包头传递
}

// 发布活动规则
message PublishActivityResourceReq {
    string activity_resource_id = 1;    // 营销中台活动ID
    string user_name = 2;               // 用户名

    string app_id = 100; // 业务ID
}
message PublishActivityResourceRsp {
    // 错误信息通过包头传递
}

// 更新活动规则（updateActivityResource和UpdateOnlineActivityResource共用）
// http://tdea.midas.boss.com/admin/midas/downloadAPIDocument?interfaceKey=updateActivityResource&version=
message UpdateActivityReq {
    repeated ActivityResourceRuleInfo activity_resource_rule_infos = 1;
    repeated OverProviderProduct over_provide_products = 2;
    repeated BudgetConfigure budget_configures = 3;
    FusingRule quantity_fusing_rule = 4;
    FusingRule amount_fusing_rule = 5;
    int32 overload_rule_quantity_period_in_seconds = 6;
    int32 overload_rule_amount_period_in_seconds = 7;
    int32 overload_rule_quantity_limit = 8;
    int32 overload_rule_amount_limit = 9;
    string activity_resource_type = 10;
    string activity_resource_name = 11;
    string activity_resource_desc = 12;
    int32 user_total_get_limit = 13;
    int32 user_daily_get_limit = 14;
    repeated string warning_notify = 15;
    string user_define_ref = 16;
    string begin_time = 17;
    string end_time = 18;
    string user_name = 19;
    string activity_resource_id = 20;    // 活动资源ID

    string app_id = 21;  // APPID
}
message UpdateActivityRsp {
    string activity_resource_id = 1;
}

// 更新现网活动规则
// http://tdea.midas.boss.com/admin/midas/downloadAPIDocument?interfaceKey=updateOnlineActivityResource&version=
message UpdateOnlineActivityReq {
    string activity_resource_id = 1;    // 活动资源id
    repeated ResourceOnlineRuleInfo activity_resource_rule_infos = 2;
    repeated OnlineOverProviderProduct over_provide_products = 3;
    FusingRule quantity_fusing_rule = 4;
    FusingRule amount_fusing_rule = 5;
    int32 overload_rule_quantity_period_in_seconds = 6;
    int32 overload_rule_amount_period_in_seconds = 7;
    int32 overload_rule_quantity_limit = 8;
    int32 overload_rule_amount_limit = 9;
    string activity_resource_desc = 10;
    int32 user_total_get_limit = 11;
    int32 user_daily_get_limit = 12;
    repeated string warning_notify = 13;
    string begin_time = 14;
    string end_time = 15;
    string user_name = 16;

    string app_id = 17;  // APPID
}
message UpdateOnlineActivityRsp {
    string activity_resource_id = 1;
}
message ResourceOnlineRuleInfo {
    int32 overload_day_limit = 1;
    string rule_value = 2;
    int32 overload_alarm_threload_increase = 3;
    double overload_alarm_threload_present = 4;
    int64 single_user_day_limit_num = 5;
    int64 single_user_limit_num = 6;
    uint64 total_limit_num = 7;
}
message OnlineOverProviderProduct {
    repeated string check_warning_threshold = 1;
    string budget_product_id = 2;   // 物品ID，同ProductId，因为在预算里面所以换个名字，
}

message SupplementActivityResourceReq {
    string activity_resource_id = 1;
    repeated SupplyOverProviderProduct supply_over_provider_products = 2;
	repeated BudgetConfigure supplement_budget_configures = 3;
	repeated SupplementRule supplement_rules = 4;
	repeated string relate_approvers = 5;
	string user_name = 6;
	string order_id = 7;

	string app_id = 8;  // APPID
}
message SupplementActivityResourceRsp {
    string activity_resource_id = 1;
}

message SupplyOverProviderProduct {
    string supply_real_quota = 1;
	string budget_product_id = 2; // 物品ID，同ProductId，因为在预算里面所以换个名字，
}

message SupplementRule {
	int64 supplement_num = 1;
	string rule_value    = 2;
}

message ReleaseRecallReq {
    string user_name = 1; // 操作人
	string activity_resource_id = 2; // PRM活动号
	string rule_value= 3;        // PRM规则号
	int32 recall_num = 4; // 礼包回收量
	string order_id = 5; // 订单ID

	string app_id = 6;  // APPID
}
message ReleaseRecallRsp {
}

// 查询活动下礼包的消耗量
message QueryActUsageReq {
    string user_name = 1; // 操作人
	string activity_resource_id = 2; // PRM活动号

	string app_id = 3;  // APPID
}
message QueryActUsageRsp {
    repeated UsageActivityResourceRuleInfo activity_resource_rule_infos = 1;// 礼包消耗详情
}

// 活动下的礼包消耗信息
message UsageActivityResourceRuleInfo {
    string rule_value = 1;      // 礼包ID
	int32 total_limit_num = 2;    // 礼包总量
	int32 online_released_num =3; // 现网发放的礼包数量
	int32 online_remain_num = 4;  // 现网未发放的礼包数量
}

// 发布追加活动资源
message PublishSupplementActivityResourceReq {
    string user_name = 1; // 操作人
	string activity_resource_id = 2; // PRM活动号

	string app_id = 3;  // APPID
}
message PublishSupplementActivityResourceRsp {
}

service Prm {
    //   rpc CreateProduct (CreateProductReq) returns (CreateProductRsp);
    //   rpc CreateActivity (CreateActivityReq) returns (CreateActivityRsp);
}
